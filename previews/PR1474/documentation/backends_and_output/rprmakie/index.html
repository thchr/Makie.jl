<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="../../../libs/highlight/github.min.css" rel="stylesheet"/><link href="../../../css/franklin.css" rel="stylesheet"/><link href="../../../css/minimal-mistakes.css" rel="stylesheet"/><link href="../../../css/makie.css" rel="stylesheet"/><link href="../../../assets/icon_transparent.png" rel="icon"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><title>RadeonProRender Backend</title></head><body class="layout--single"><div class="site-container"><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav class="greedy-nav" id="site-nav"><a class="title-icon" href="../../.."><img src="../../../assets/makie_logo_transparent.svg"/></a><ul class="visible-links"><li class="masthead__menu-item"><a href="https://github.com/JuliaPlots/Makie.jl"><img class="masthead-icon" src="../../../assets/GitHub-Mark-64px.png"/></a></li><li class="masthead__menu-item"><a href="../../../examples/">Examples</a></li><li class="masthead__menu-item"><a href="../../../tutorials/">Tutorials</a></li><li class="masthead__menu-item"><a href="../..">Documentation</a></li></ul><button class="greedy-nav__toggle" type="button"><span class="visually-hidden">Toggle menu</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div id="overlay"></div><div id="navbar-container"><div id="navbar"><form action="../../../search/index.html" id="lunrSearchForm" name="lunrSearchForm"><input class="search-input" name="q" placeholder="Search docs" type="text"/></form><h1>Navigation</h1><ul><li><div class="tocitem-container"><a href="../../..">Home</a></div></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2"><i class="docs-chevron"></i></label><a href="../../../examples">Examples</a></div><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-1"><i class="docs-chevron"></i></label><a href="../../../examples/layoutables">Layoutables &amp; Widgets</a></div><ul><li><div class="tocitem-container"><a href="../../../examples/layoutables/axis">Axis</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/axis3">Axis3</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/box">Box</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/button">Button</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/colorbar">Colorbar</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/gridlayout">GridLayout</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/intervalslider">IntervalSlider</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/label">Label</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/legend">Legend</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/lscene">LScene</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/menu">Menu</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/slider">Slider</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/textbox">Textbox</a></div></li><li><div class="tocitem-container"><a href="../../../examples/layoutables/toggle">Toggle</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-2"><i class="docs-chevron"></i></label><a href="../../../examples/plotting_functions">Plotting functions</a></div><ul><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/abline">abline!</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/arrows">arrows</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/band">band</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/barplot">barplot</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/boxplot">boxplot</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/contour">contour</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/contourf">contourf</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/crossbar">crossbar</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/density">density</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/ecdf">ecdfplot</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/errorbars">errorbars</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/heatmap">heatmap</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/hist">hist</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/hvlines">hlines! and vlines!</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/hvspan">hspan! and vspan!</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/image">image</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/lines">lines</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/linesegments">linesegments</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/mesh">mesh</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/meshscatter">meshscatter</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/poly">poly</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/rangebars">rangebars</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/scatter">scatter</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/scatterlines">scatterlines</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/series">series</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/stairs">stairs</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/stem">stem</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/streamplot">streamplot</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/surface">surface</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/text">text</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/violin">violin</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/volume">volume</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/volumeslices">volumeslices</a></div></li><li><div class="tocitem-container"><a href="../../../examples/plotting_functions/wireframe">wireframe</a></div></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-3"><i class="docs-chevron"></i></label><a href="../../../tutorials">Tutorials</a></div><ul><li><div class="tocitem-container"><a href="../../../tutorials/aspect-tutorial">Aspect ratio and size control tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/basic-tutorial">Basic Tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/layout-tutorial">Layout Tutorial</a></div></li><li><div class="tocitem-container"><a href="../../../tutorials/scenes">Scene tutorial</a></div></li></ul></li><li><input checked="" class="collapse-toggle" id="menuitem-4" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4"><i class="docs-chevron"></i></label><a href="../..">Documentation</a></div><ul><li><div class="tocitem-container"><a href="../../api_reference">API reference</a></div></li><li><div class="tocitem-container"><a href="../../animation">Animations</a></div></li><li><input checked="" class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4-3"><i class="docs-chevron"></i></label><a href="..">Backends &amp; Output</a></div><ul><li><div class="tocitem-container"><a href="../figure_size">Exporting a Figure with physical dimensions</a></div></li><li><div class="tocitem-container"><a class="active" href="">RadeonProRender Backend</a></div><ul class="page-content"><li><a href="#radeonprorender_backend">RadeonProRender Backend</a></li><li><ul><li><a href="#activating_and_working_with_rpmakie">Activating and working with RPMakie</a></li><li><a href="#materialx_and_predefined_materials_materialsjl">MaterialX and predefined materials (materials.jl)</a></li><li><a href="#advanced_custom_material_earth_topographyjl">Advanced custom material (earth_topography.jl)</a></li><li><a href="#glmakie_interop_opengl_interopjl">GLMakie interop (opengl_interop.jl)</a></li><li><a href="#animations_legojl">Animations (lego.jl)</a></li><li><a href="#earth_example">Earth example</a></li></ul></li></ul></li><li><div class="tocitem-container"><a href="../wglmakie">JSServe and WGLMakie</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../cameras">Cameras</a></div></li><li><div class="tocitem-container"><a href="../../colors">Colors</a></div></li><li><div class="tocitem-container"><a href="../../events">Events</a></div></li><li><div class="tocitem-container"><a href="../../faq">Frequently Asked Questions</a></div></li><li><div class="tocitem-container"><a href="../../figure">Figures</a></div></li><li><div class="tocitem-container"><a href="../../inspector">Inspecting Data</a></div></li><li><div class="tocitem-container"><a href="../../latex">LaTeX</a></div></li><li><div class="tocitem-container"><a href="../../layoutables">Layoutables</a></div></li><li><div class="tocitem-container"><a href="../../layouting">How layouts work</a></div></li><li><div class="tocitem-container"><a href="../../lighting">Lighting</a></div></li><li><div class="tocitem-container"><a href="../../news">News</a></div></li><li><div class="tocitem-container"><a href="../../nodes">Observables &amp; Interaction</a></div></li><li><div class="tocitem-container"><a href="../../plot_method_signatures">Plot Method Signatures</a></div></li><li><div class="tocitem-container"><a href="../../recipes">Plot Recipes</a></div></li><li><div class="tocitem-container"><a href="../../remote">Remote servers</a></div></li><li><div class="tocitem-container"><a href="../../scenes">Scenes</a></div></li><li><input class="collapse-toggle" id="menuitem-4-20" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4-20"><i class="docs-chevron"></i></label><a href="../../theming">Theming</a></div><ul><li><div class="tocitem-container"><a href="../../theming/predefined_themes">Predefined themes</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../transparency">Basic transparency</a></div></li></ul></li></ul></div></div><div class="franklin-content"><h1 id="radeonprorender_backend"><a class="header-anchor" href="#radeonprorender_backend">RadeonProRender Backend</a></h1><p>experimental ray tracing using AMDs <a href="https://radeon-pro.github.io/RadeonProRenderDocs/en/index.html">RadeonProRender</a>. While it's created by AMD and tailored to Radeon GPUs, it still works just as well for NVidia and Intel GPUs using OpenCL. It also works on the CPU and even has a hybrid modus to use GPUs and CPUs in tandem to render images.</p><h2 id="activating_and_working_with_rpmakie"><a class="header-anchor" href="#activating_and_working_with_rpmakie">Activating and working with RPMakie</a></h2><p>To use the backend, just call <code>activate!</code> like with all other backends. There are a few extra parameters for RPRMakie:</p><pre><code>RPRMakie.activate!(;
    iterations=200,
    resource=RPR.RPR_CREATION_FLAGS_ENABLE_GPU0,
    plugin=RPR.Tahoe)</code></pre><ul><li><p>iterations: Iterations of light simulations. The more iterations, the less noisy the picture becomes, but higher numbers take much longer. For e.g. <code>iterations=10</code> one should expect rendering to take a couple of seconds but it will produce pretty noisy output. 200 is a good middle ground taking around ~30s on an old nvidia 1060. For highest quality output, numbers above 500 are required.</p></li><li><p>resource: GPU or CPU to use. Multiple GPUs and CPUs can be used together by using <code>&amp;</code> (e.g. <code>RPR.RPR_CREATION_FLAGS_ENABLE_GPU0 &amp; RPR.RPR_CREATION_FLAGS_ENABLE_CPU</code>)</p></li><li><p>plugin:</p><ul><li><p><code>RPR.Tahoe</code>, the legacy RadeonProRender backend. It's the most stable, but doesn't have all new features (e.g. the <code>RPR.MatX</code> material), and may be slower than others</p></li><li><p><code>RPR.Northstar</code>, the new rewritten backend, faster and optimized for many iterations. Single iterations are much slower, so less usable for interactive display. Sometimes, Northstar just produces black, jiggly objects. It's not clear yet, if that's just a bug, or the result of using an unsupported/deprecated feature. Switch to <code>Tahoe</code> if that happens.</p></li><li><p><code>RPR.Hybrid</code>: Vulkan backend, fit for real time rendering, using AMDs and NVIDIAs new hardware accelerated ray tracing. Doesn't work reliably yet and only works with <code>RPR.Uber</code> material.</p></li><li><p><code>RPR.HybridPro</code>: The same as Hybrid, but works only for Radeon GPUs, using AMDs own hardware acceleration API.</p></li></ul></li></ul><p>Since RPRMakie is quite the unique backend and still experimental, there are several gotchas when working with it.</p><pre><code class="language-julia">fig = Figure()
radiance = 10000
# Lights are much more important for ray tracing,
# so most examples will use extra lights and environment lights.
# Note, that RPRMakie is the only backend
# supporting multiple light sources and EnvironmentLights right now
lights = [
    EnvironmentLight(0.5, load(RPR.assetpath("studio026.exr"))),
    PointLight(Vec3f(0, 0, 20), RGBf(radiance, radiance, radiance))]

# Only LScene is supported right now,
# since the other projections don't map to the pysical acurate Camera in RPR.
ax = LScene(fig[1, 1]; scenekw=(lights=lights,))

# to create materials, one needs access to the RPR context.
# Note, if you create an RPRScreen manually, don't display the scene or fig anymore, since that would create a new RPR context, in which resources from the manually created Context would be invalid. Since RPRs error handling is pretty bad, this usually results in Segfaults.
# See below how to render a picture with a manually created context
screen = RPRScreen(ax.scene; iterations=10, plugin=RPR.Northstar)
matsys = screen.matsys
context = screen.context
# You can use lots of materials from RPR.
# Note, that this API may change in the future to a backend  independent representation
# Or at least one, that doesn't need to access the RPR context
mat = RPR.Chrome(matsys)
# The material attribute is specific to RPRMakie and gets ignored by other Backends. This may change in the future
mesh!(ax, Sphere(Point3f, 0), material=mat)

# There are three main ways to turn a Makie scene into a picture:
# Get the colorbuffer of the RPRScreen. RPRScreen also has `show` overloaded for the mime `image\png` so it should display in IJulia/Jupyter/VSCode.
image = colorbuffer(screen)::Matrix{RGB{N0f8}}
# Replace a specific (sub) LScene with RPR, and display the whole scene interactively in GLMakie
using GLMakie
refres = Observable(nothing) # Optional observable that triggers
GLMakie.activate!(); display(fig) # Make sure to display scene first in GLMakie
# Replace the scene with an interactively rendered RPR output.
# See more about this in the GLMakie interop example
context, task = RPRMakie.replace_scene_rpr!(ax.scene, screen; refresh=refresh)
# If one doesn't create the RPRScreen manually to create custom materials,
# display(ax.scene), show(io, MIME"image/png", ax.scene), save("rpr.png", ax.scene)
# Should work just like with other backends.
# Note, that only the scene from LScene can be displayed directly, but soon, `display(fig)` should also work.</code></pre><p>There are several examples showing different aspects of how to use RPRMakie. The examples are in https://github.com/JuliaPlots/Makie.jl/tree/master/RPRMakie/examples</p><h2 id="materialx_and_predefined_materials_materialsjl"><a class="header-anchor" href="#materialx_and_predefined_materials_materialsjl">MaterialX and predefined materials (materials.jl)</a></h2><p>there are several predefined materials one can use in RadeonProRender. RPR also supports the <a href="https://www.materialx.org/">MaterialX</a> standard to load a wide range of predefined Materials. Make sure to use the Northstar backend for <code>Matx</code> materials.</p><img src="../../../assets/materials.png"/><h2 id="advanced_custom_material_earth_topographyjl"><a class="header-anchor" href="#advanced_custom_material_earth_topographyjl">Advanced custom material (earth_topography.jl)</a></h2><img src="../../../assets/topographie.png"/><h2 id="glmakie_interop_opengl_interopjl"><a class="header-anchor" href="#glmakie_interop_opengl_interopjl">GLMakie interop (opengl_interop.jl)</a></h2><p>RPRMakie doesn't support layouting and sub scenes yet, but you can replace a single scene with a RPR renedered, interactive window. This is especially handy, to show 2d graphics and interactive UI elements next to a ray traced scene and interactively tune camera and material parameters.</p><video autoplay="" controls="" src="../../../assets/opengl_interop.mp4"></video><h2 id="animations_legojl"><a class="header-anchor" href="#animations_legojl">Animations (lego.jl)</a></h2><p>Not all objects support updating via Observables yet, but translations, camera etc are already covered and can be used together with Makie's standard animation API.</p><video autoplay="" controls="" src="../../../assets/lego_walk.mp4"></video><h2 id="earth_example"><a class="header-anchor" href="#earth_example">Earth example</a></h2><img src="../../../assets/earth.png"/><div class="page-foot"><div class="copyright">
    © Makie.jl. Last modified: December 10, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
      <p>These docs were autogenerated using Makie: v0.15.3, GLMakie: v0.4.7, CairoMakie: v0.6.6, WGLMakie: v0.4.7</p></div></div></div></div><div class="page__footer"><footer><div class="page__footer-follow"><ul class="social-icons"><li><a href="https://twitter.com/MakiePlots" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i> Twitter</a></li><li><a href="https://github.com/JuliaPlots/Makie.jl" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i> GitHub</a></li></ul></div><div class="page__footer-copyright">© Makie.jl. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div></div><script src="../../../libs/navbar.js"></script><script src="../../../libs/lunr/lunr.min.js"></script><script src="../../../libs/lunr/lunr_index.js"></script><script src="../../../libs/lunr/lunrclient.min.js"></script><script crossorigin="anonymous" defer="" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="../../../libs/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script></body></HTML>